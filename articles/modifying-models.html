<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Modifying the model included with ss3sim • ss3sim</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Modifying the model included with ss3sim">
<meta property="og:description" content="ss3sim">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ss3sim</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.19.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction.html">Introduction to ss3sim</a>
    </li>
    <li>
      <a href="../articles/making-models.html">Creating new ss3sim model setups</a>
    </li>
    <li>
      <a href="../articles/modifying-models.html">Modifying the model included with ss3sim</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ss3sim/ss3sim/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="modifying-models_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Modifying the model included with ss3sim</h1>
            
            <h4 data-toc-skip class="date">2022-05-27</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ss3sim/ss3sim/blob/HEAD/vignettes/modifying-models.Rmd" class="external-link"><code>vignettes/modifying-models.Rmd</code></a></small>
      <div class="hidden name"><code>modifying-models.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="modify">Modifying the OM and EM models included with ss3sim<a class="anchor" aria-label="anchor" href="#modify"></a>
</h2>
<p>ss3sim comes with a built-in Stock Synthesis (SS3) operating model (OM) and estimation model (EM) for a cod-like (slow-growing and long-lived) species. This cod-like species is based on North Sea cod (<em>Gadus morhua</em>; R. Methot, pers. comm.). The original assessment model was simplified to make it more generic for simulation testing and structured to work with ss3sim. Previous ss3sim simulation studies also used flatfish-like (fast-growing and long-lived) and sardine-like (fast-growing and short-lived) model set ups. These model setups were based yellowtail flounder (<em>Limanda ferruginea</em>; R. Methot, pers. comm.) and Pacific sardine <span class="citation">(<em>Sardinops sagax caeruleus</em>; Hill et al. 2012)</span>. The specific details (e.g., many fleets, tagging data, seasons, etc.) of the original model setups were not important and removed to produce a set of models generic enough to represent different life-history types. Further details on these models are available in <span class="citation">Johnson et al. (2015)</span> and <span class="citation">Ono et al. (2015)</span>. While these model setups are generic and cover a wide range of life-history types, they may not be suitable for all users. Therefore, in this section, we outline strategies for modifying the existing SS3 model available within the ss3sim package.</p>
<p>ss3sim is not designed for testing properties of specific SS3 models, but rather properties of assessment models in general. Currently, there are many features of SS3 that cannot be manipulated by ss3sim. For example, seasons, hermaphrodism, multiple areas, movement, growth morphs, and platoons. All features that have been removed from the cod-like species if they were present in the original assessment. It is possible to create new models that will work within the ss3sim framework. But, this task will be complicated and likely require extensive knowledge of SS3 and R. This process is described in more detail in Sections  and . We recommend adapting the current built-in models to match your desired model setup because the configuration of this model has already been tested within ss3sim and is easily adaptable.</p>
<p>For example, you can modify the cod OM and EM files to have a different maturity before exploring sampling schemes using the <code>sample_index</code>, <code>sample_lcomp</code>, and <code>sample_agecomp</code> functions. The following steps provide a basic guideline for how to accomplish this:</p>
<ul>
<li>Create a simulation dataframe or list and verify these simulations run with the original cod model using the function <code>run_ss3sim</code> or <code>ss3sim_base</code>, respectively. It is probably best to do a shorter deterministic run (<a href="introduction.html#deterministic">see the section on deterministic runs</a>) rather than a run with process error. After running, read in the data and do visual checks for proper functionality.</li>
<li>Locate the cod model OM and EM files using <code>system.file(file.path("extdata", "models"), package = "ss3sim")</code>.</li>
<li>Copy the OM and EM folders and rename them as desired.</li>
<li>Make a single change to either the <code>.dat</code> or <code>.ctl</code> files for the new model and run them manually with SS3 via the command line or a <code>system</code> call within R if there is any question if they might break the model.</li>
<li>Rerun the model through <code>run_ss3sim</code> and verify it is still working.</li>
<li>Repeat previous two steps with each small change you desire to make.</li>
<li>Turn off deterministic runs and run the simulation stochastically.</li>
</ul>
<div id="refs" class="references">
<div id="ref-hill2012">
<p>Hill, K. T., P. R. Crone, N. C. H. Lo, D. A. Demer, J. P. Zwolinski, and B. J. Macewicz. 2012. “Assessment of the Pacific Sardine Resource in 2012 for U.S. Management in 2013.” 7700 NE Ambassador Place, Portland, OR 97220, USA: Pacific Fishery Management Council.</p>
</div>
<div id="ref-johnson2014">
<p>Johnson, Kelli F., Cole C. Monnahan, Carey R. McGilliard, Katyana A. Vert-pre, Sean C. Anderson, Curry J. Cunningham, Felipe Hurtado-Ferro, et al. 2015. “Time-Varying Natural Mortality in Fisheries Stock Assessment Models: Identifying a Default Approach.” <em>ICES Journal of Marine Science: Journal Du Conseil</em> 72 (1): 137–50. <a href="https://doi.org/10.1093/icesjms/fsu055" class="external-link">https://doi.org/10.1093/icesjms/fsu055</a>.</p>
</div>
<div id="ref-ono2014">
<p>Ono, Kotaro, Roberto Licandeo, Melissa L. Muradian, Curry J. Cunningham, Sean C. Anderson, Felipe Hurtado-Ferro, Kelli F. Johnson, et al. 2015. “The Importance of Length and Age Composition Data in Statistical Age-Structured Models for Marine Species.” <em>ICES Journal of Marine Science: Journal Du Conseil</em> 72 (1): 31–43. <a href="https://doi.org/10.1093/icesjms/fsu007" class="external-link">https://doi.org/10.1093/icesjms/fsu007</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Kelli F. Johnson, Sean C. Anderson, Kathryn L. Doering, Cole C. Monnahan, Christine C. Stawitz.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
