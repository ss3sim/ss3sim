<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>High-level wrapper to run a simulation — ss3sim_base • ss3sim</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="High-level wrapper to run a simulation — ss3sim_base"><meta property="og:description" content="A wrapper function that
calls r4ss::run() to run the operating model,
samples the output to create fishery and survey data, and
calls r4ss::run() to run the estimation model.
This function is the main workhorse of this package and
is typically not called by the user but called from run_ss3sim().

"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ss3sim</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.21.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/introduction.html">Introduction to ss3sim</a>
    </li>
    <li>
      <a href="../articles/making-models.html">Creating new ss3sim model setups</a>
    </li>
    <li>
      <a href="../articles/modifying-models.html">Modifying the model included with ss3sim</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ss3sim/ss3sim/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>High-level wrapper to run a simulation</h1>
    <small class="dont-index">Source: <a href="https://github.com/ss3sim/ss3sim/blob/main/R/ss3sim_base.r" class="external-link"><code>R/ss3sim_base.r</code></a></small>
    <div class="hidden name"><code>ss3sim_base.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A wrapper function that</p><ul><li><p>calls <code><a href="https://r4ss.github.io/r4ss/reference/run.html" class="external-link">r4ss::run()</a></code> to run the operating model,</p></li>
<li><p>samples the output to create fishery and survey data, and</p></li>
<li><p>calls <code><a href="https://r4ss.github.io/r4ss/reference/run.html" class="external-link">r4ss::run()</a></code> to run the estimation model.
This function is the main workhorse of this package and
is typically not called by the user but called from <code><a href="run_ss3sim.html">run_ss3sim()</a></code>.</p></li>
</ul></div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ss3sim_base</span><span class="op">(</span></span>
<span>  <span class="va">iterations</span>,</span>
<span>  <span class="va">scenarios</span>,</span>
<span>  <span class="va">f_params</span>,</span>
<span>  <span class="va">index_params</span>,</span>
<span>  discard_params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lcomp_params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  agecomp_params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  calcomp_params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  wtatage_params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  mlacomp_params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  em_binning_params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  estim_params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tv_params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  operat_params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">om_dir</span>,</span>
<span>  <span class="va">em_dir</span>,</span>
<span>  retro_params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  data_params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  weight_comps_params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  user_recdevs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  user_recdevs_warn <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  bias_adjust <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  sleep <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">21</span>,</span>
<span>  extras <span class="op">=</span> <span class="st">" "</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-iterations">iterations<a class="anchor" aria-label="anchor" href="#arg-iterations"></a></dt>
<dd><p>Which iterations to run. A numeric vector.</p></dd>


<dt id="arg-scenarios">scenarios<a class="anchor" aria-label="anchor" href="#arg-scenarios"></a></dt>
<dd><p>A name to use as the folder name for the unique combination
of parameters for the OM and EM.</p></dd>


<dt id="arg-f-params">f_params<a class="anchor" aria-label="anchor" href="#arg-f-params"></a></dt>
<dd><p>A named list containing arguments for <code><a href="change_f.html">change_f()</a></code>.
A mandatory input.</p></dd>


<dt id="arg-index-params">index_params<a class="anchor" aria-label="anchor" href="#arg-index-params"></a></dt>
<dd><p>A named list containing arguments for
<code><a href="sample_index.html">sample_index()</a></code>. A mandatory input.</p></dd>


<dt id="arg-discard-params">discard_params<a class="anchor" aria-label="anchor" href="#arg-discard-params"></a></dt>
<dd><p>A named list containing arguments for
<code><a href="sample_discard.html">sample_discard()</a></code>.</p></dd>


<dt id="arg-lcomp-params">lcomp_params<a class="anchor" aria-label="anchor" href="#arg-lcomp-params"></a></dt>
<dd><p>A named list containing arguments for
<code><a href="sample_lcomp.html">sample_lcomp()</a></code>. A mandatory input.</p></dd>


<dt id="arg-agecomp-params">agecomp_params<a class="anchor" aria-label="anchor" href="#arg-agecomp-params"></a></dt>
<dd><p>A named list containing arguments for
<code><a href="sample_agecomp.html">sample_agecomp()</a></code>. A mandatory input.</p></dd>


<dt id="arg-calcomp-params">calcomp_params<a class="anchor" aria-label="anchor" href="#arg-calcomp-params"></a></dt>
<dd><p>A named list containing arguments for
<code><a href="sample_calcomp.html">sample_calcomp()</a></code>, for conditional age-at-length data.</p></dd>


<dt id="arg-wtatage-params">wtatage_params<a class="anchor" aria-label="anchor" href="#arg-wtatage-params"></a></dt>
<dd><p>A named list containing arguments for
<code><a href="sample_wtatage.html">sample_wtatage()</a></code>, for empirical weight-at-age data.</p></dd>


<dt id="arg-mlacomp-params">mlacomp_params<a class="anchor" aria-label="anchor" href="#arg-mlacomp-params"></a></dt>
<dd><p>A named list containing arguments for
<code><a href="sample_mlacomp.html">sample_mlacomp()</a></code>, for mean length-at-age data.</p></dd>


<dt id="arg-em-binning-params">em_binning_params<a class="anchor" aria-label="anchor" href="#arg-em-binning-params"></a></dt>
<dd><p>A named list containing arguments for
<code><a href="change_em_binning.html">change_em_binning()</a></code>.</p></dd>


<dt id="arg-estim-params">estim_params<a class="anchor" aria-label="anchor" href="#arg-estim-params"></a></dt>
<dd><p>A named list containing arguments for
<code><a href="change_e.html">change_e()</a></code>.</p></dd>


<dt id="arg-tv-params">tv_params<a class="anchor" aria-label="anchor" href="#arg-tv-params"></a></dt>
<dd><p>A named list containing arguments for
<code><a href="change_tv.html">change_tv()</a></code> (time-varying).</p></dd>


<dt id="arg-operat-params">operat_params<a class="anchor" aria-label="anchor" href="#arg-operat-params"></a></dt>
<dd><p>A named list containing arguments for <code><a href="change_o.html">change_o()</a></code>.</p></dd>


<dt id="arg-om-dir">om_dir<a class="anchor" aria-label="anchor" href="#arg-om-dir"></a></dt>
<dd><p>The directory with the operating model you want to copy and use
for the specified simulations.</p></dd>


<dt id="arg-em-dir">em_dir<a class="anchor" aria-label="anchor" href="#arg-em-dir"></a></dt>
<dd><p>The directory with the estimation model you want to copy and
use for the specified simulations. If <code>NA</code>, then no estimation method is
included and only data is created.</p></dd>


<dt id="arg-retro-params">retro_params<a class="anchor" aria-label="anchor" href="#arg-retro-params"></a></dt>
<dd><p>A named list containing the arguments for
<code><a href="change_retro.html">change_retro()</a></code>.</p></dd>


<dt id="arg-data-params">data_params<a class="anchor" aria-label="anchor" href="#arg-data-params"></a></dt>
<dd><p>A named list containing arguments for changing data.</p></dd>


<dt id="arg-weight-comps-params">weight_comps_params<a class="anchor" aria-label="anchor" href="#arg-weight-comps-params"></a></dt>
<dd><p>A named list containing arguments for
<code><a href="https://r4ss.github.io/r4ss/reference/tune_comps.html" class="external-link">r4ss::tune_comps()</a></code>.</p></dd>


<dt id="arg-user-recdevs">user_recdevs<a class="anchor" aria-label="anchor" href="#arg-user-recdevs"></a></dt>
<dd><p>An optional matrix of recruitment deviations to replace
the recruitment deviations built into the package. The columns represent
run iterations and the rows represent years. <code>user_recdevs</code> can be a
matrix of 0s for deterministic model checking. For traditional stochastic
simulations these would be independent and normally distributed deviations
with a standard deviation equal to the desired sigma R. Note that these
recruitment deviations will be used verbatim (after exponentiation).
<code>user_recdevs</code> will <em>not</em> be multiplied by sigma R and they will <em>not</em>
be log-normal bias corrected. If <code>user_recdevs</code> are specified as
anything besides <code>NULL</code> the package will issue a warning about this.
Biased recruitment deviations can lead to biased model results.</p></dd>


<dt id="arg-user-recdevs-warn">user_recdevs_warn<a class="anchor" aria-label="anchor" href="#arg-user-recdevs-warn"></a></dt>
<dd><p>A logical argument allowing users to turn the
warning regarding biased recruitment deviations off when <code>user_recdevs</code>
are specified.</p></dd>


<dt id="arg-bias-adjust">bias_adjust<a class="anchor" aria-label="anchor" href="#arg-bias-adjust"></a></dt>
<dd><p>A logical argument specifying bias adjustment is
conducted. Bias adjustment helps assure that the estimated recruitment
deviations, which are assumed to be log-normally distributed, are mean
unbiased leading to mean-unbiased estimates of biomass <a href="https://cdnsciencepub.com/doi/abs/10.1139/f2011-092" class="external-link">Methot and Taylor, 2011</a>. Bias
adjustment should always be performed when using maximum likelihood
estimation when running simulations for publication or management. The
argument allows users to turn bias adjustment off because it involves
running the EM multiple times with the hessian and is not needed when
initially exploring your simulation structure.</p></dd>


<dt id="arg-sleep">sleep<a class="anchor" aria-label="anchor" href="#arg-sleep"></a></dt>
<dd><p>A time interval (in seconds) to pause on each iteration. Useful
if you want to reduce average CPU time – perhaps because you're working on
a shared server.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>The seed value to pass to <code><a href="get_recdevs.html">get_recdevs()</a></code> when
generating recruitment deviations. The generated recruitment deviations
depend on the iteration value, but also on the value of <code>seed</code>. A
given combination of iteration, number of years, and <code>seed</code> value will
result in the same recruitment deviations.</p></dd>


<dt id="arg-extras">extras<a class="anchor" aria-label="anchor" href="#arg-extras"></a></dt>
<dd><p>A character string that will be passed to the <code>extras</code>
argument of <code><a href="https://r4ss.github.io/r4ss/reference/run.html" class="external-link">r4ss::run()</a></code>. The default is <code>" "</code> which results in the
hessian being inverted if the model has positive phases, i.e., the EM.
Pass <code>"-nohess "</code> if you do not want to estimate the hessian or
<code>"-stopph 3 -nohess"</code> if you want to stop the model in phase 3 and you
do not want to invert the hessian. The key is that the entry must be one
string with spaces between the arguments that will be passed to ADMB.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>The output will appear in whatever your current <span style="R">R</span> working directory
is. There will be folders named after your scenarios with one folder
per iteration. Each iteration folder with include an operating model and
an estimation method. Your directory will look like the following:</p><ul><li><p><code>scen-cod/1/om</code></p></li>
<li><p><code>scen-cod/1/em</code></p></li>
<li><p><code>scen-cod/2/om</code></p></li>
<li><p>...</p></li>
</ul><p>If <code>em_dir = NA</code>, then the contents of the <code>em</code> directories will be minimal
because they will only contain the simulated data and
not any fits to those data.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function is written to be flexible. You can specify the fishing
mortality, survey catch-per-unit-effort settings,
length-composition data settings, etc. in the function call as list objects
(see the example below). For a generic higher-level function, see
<code><a href="run_ss3sim.html">run_ss3sim()</a></code>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="run_ss3sim.html">run_ss3sim()</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Sean Anderson with contributions from many others as listed in
the DESCRIPTION file.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Create a temporary folder for the output and set the working directory:</span></span></span>
<span class="r-in"><span><span class="co"># Create a temporary folder for the output and set the working directory:</span></span></span>
<span class="r-in"><span><span class="va">temp_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"ss3sim-base-example"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">temp_path</span>, showWarnings <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">wd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="va">temp_path</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/on.exit.html" class="external-link">on.exit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="va">wd</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Find the data in the ss3sim package:</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"ss3sim"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">om_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">d</span>, <span class="st">"models"</span>, <span class="st">"cod-om"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">em_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">d</span>, <span class="st">"models"</span>, <span class="st">"cod-em"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Or, create the argument lists directly in R:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">F0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  years <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span>,</span></span>
<span class="r-in"><span>  fleets <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  fvals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">25</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.114</span>, <span class="fl">75</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">index1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  fleets <span class="op">=</span> <span class="fl">2</span>, years <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">62</span>, <span class="fl">100</span>, by <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sds_obs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">0.1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lcomp1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  fleets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, Nsamp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">100</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  years <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">26</span><span class="op">:</span><span class="fl">100</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">62</span>, <span class="fl">100</span>, by <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">agecomp1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  fleets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, Nsamp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">100</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  years <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">26</span><span class="op">:</span><span class="fl">100</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">62</span>, <span class="fl">100</span>, by <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">E0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  par_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LnQ_base_Fishery"</span>, <span class="st">"NatM_uniform_Fem_GP_1"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  par_int <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>, par_phase <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span>, forecast_num <span class="op">=</span> <span class="fl">0</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">ss3sim_base</span><span class="op">(</span></span></span>
<span class="r-in"><span>  iterations <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  scenarios <span class="op">=</span> <span class="st">"D1-E0-F0-cod"</span>, <span class="co"># name as desired</span></span></span>
<span class="r-in"><span>  f_params <span class="op">=</span> <span class="va">F0</span>,</span></span>
<span class="r-in"><span>  index_params <span class="op">=</span> <span class="va">index1</span>,</span></span>
<span class="r-in"><span>  lcomp_params <span class="op">=</span> <span class="va">lcomp1</span>,</span></span>
<span class="r-in"><span>  agecomp_params <span class="op">=</span> <span class="va">agecomp1</span>,</span></span>
<span class="r-in"><span>  estim_params <span class="op">=</span> <span class="va">E0</span>,</span></span>
<span class="r-in"><span>  om_dir <span class="op">=</span> <span class="va">om_dir</span>,</span></span>
<span class="r-in"><span>  em_dir <span class="op">=</span> <span class="va">em_dir</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">replist</span> <span class="op">&lt;-</span> <span class="fu">r4ss</span><span class="fu">::</span><span class="fu"><a href="https://r4ss.github.io/r4ss/reference/SS_output.html" class="external-link">SS_output</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"D1-E0-F0-cod"</span>, <span class="fl">1</span>, <span class="st">"em"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>, printstats <span class="op">=</span> <span class="cn">FALSE</span>, covar <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">testthat</span><span class="fu">::</span><span class="fu"><a href="https://testthat.r-lib.org/reference/expect_equivalent.html" class="external-link">expect_equivalent</a></span><span class="op">(</span><span class="va">replist</span><span class="op">[[</span><span class="st">"cpue"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>, <span class="st">"Yr"</span><span class="op">]</span>, <span class="va">index1</span><span class="op">[[</span><span class="st">"years"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">test</span> <span class="op">&lt;-</span> <span class="va">replist</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="st">"D1-E0-F0-cod"</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># clean up</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run without an EM, where this package operates as a data-generating tool</span></span></span>
<span class="r-in"><span><span class="fu">ss3sim_base</span><span class="op">(</span></span></span>
<span class="r-in"><span>  iterations <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  scenarios <span class="op">=</span> <span class="st">"noEM"</span>,</span></span>
<span class="r-in"><span>  f_params <span class="op">=</span> <span class="va">F0</span>,</span></span>
<span class="r-in"><span>  index_params <span class="op">=</span> <span class="va">index1</span>,</span></span>
<span class="r-in"><span>  lcomp_params <span class="op">=</span> <span class="va">lcomp1</span>,</span></span>
<span class="r-in"><span>  agecomp_params <span class="op">=</span> <span class="va">agecomp1</span>,</span></span>
<span class="r-in"><span>  estim_params <span class="op">=</span> <span class="va">E0</span>,</span></span>
<span class="r-in"><span>  om_dir <span class="op">=</span> <span class="va">om_dir</span>,</span></span>
<span class="r-in"><span>  em_dir <span class="op">=</span> <span class="cn">NA</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Kelli F. Johnson, Sean C. Anderson, Kathryn L. Doering, Cole C. Monnahan, Christine C. Stawitz.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

      </footer></div>






  </body></html>

