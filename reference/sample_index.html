<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Sample the CPUE/index data with observation error — sample_index • ss3sim</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Sample the CPUE/index data with observation error — sample_index"><meta property="og:description" content="Create new catch-per-unit-effort (CPUE)/indices of abundance that are
based on the numbers in a data file. Typically the data file will be filled
with expected values rather than observed data but it does not have to be.
Sampling can only occur on fleets, years, and seasons that have current
observations. If rows of information are not sampled from, then they are
removed. So, you can take away rows of data but you cannot add them with
this function."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ss3sim</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.21.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/introduction.html">Introduction to ss3sim</a>
    </li>
    <li>
      <a href="../articles/making-models.html">Creating new ss3sim model setups</a>
    </li>
    <li>
      <a href="../articles/modifying-models.html">Modifying the model included with ss3sim</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ss3sim/ss3sim/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Sample the CPUE/index data with observation error</h1>
    <small class="dont-index">Source: <a href="https://github.com/ss3sim/ss3sim/blob/main/R/sample_index.r" class="external-link"><code>R/sample_index.r</code></a></small>
    <div class="hidden name"><code>sample_index.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create new catch-per-unit-effort (CPUE)/indices of abundance that are
based on the numbers in a data file. Typically the data file will be filled
with expected values rather than observed data but it does not have to be.
Sampling can only occur on fleets, years, and seasons that have current
observations. If rows of information are not sampled from, then they are
removed. So, you can take away rows of data but you cannot add them with
this function.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sample_index</span><span class="op">(</span></span>
<span>  <span class="va">dat_list</span>,</span>
<span>  outfile <span class="op">=</span> <span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="https://lifecycle.r-lib.org/reference/deprecated.html" class="external-link">deprecated</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">fleets</span>,</span>
<span>  <span class="va">years</span>,</span>
<span>  sds_obs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">0.01</span><span class="op">)</span>,</span>
<span>  <span class="va">sds_out</span>,</span>
<span>  seas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-dat-list">dat_list<a class="anchor" aria-label="anchor" href="#arg-dat-list"></a></dt>
<dd><p>A Stock Synthesis data list returned from
<code><a href="https://r4ss.github.io/r4ss/reference/SS_readdat.html" class="external-link">r4ss::SS_readdat()</a></code>. Typically, this will be read from a file that
contains expected values rather than input values but any Stock Synthesis
data file is fine.</p></dd>


<dt id="arg-outfile">outfile<a class="anchor" aria-label="anchor" href="#arg-outfile"></a></dt>
<dd><p>A deprecated argument.</p></dd>


<dt id="arg-fleets">fleets<a class="anchor" aria-label="anchor" href="#arg-fleets"></a></dt>
<dd><p>An integer vector specifying which fleets to sample from. The
order of the fleets matters here because you must retain the ordering for
all of the remaining input arguments. For example, both <code>fleets = c(1, 2)</code>
and <code>fleets = c(2, 1)</code> will work but <code>years</code> will expect the years you
want sampled for fleet 2 to be in the second position in the list in the
former and the first position in the latter case. So, if you change the
order of your input, you will also have to modify all of the remaining
arguments. An entry of <code>fleets = NULL</code> will lead to no CPUE samples in the
returned object.</p></dd>


<dt id="arg-years">years<a class="anchor" aria-label="anchor" href="#arg-years"></a></dt>
<dd><p>A list the same length as <code>fleets</code> specifying the years you
want samples from. There must be an integer vector in the list for every
fleet specified in <code>fleets</code>. The function assumes that the information for
the first fleet specified in <code>fleets</code> will be the first object in the list
and so on so order matters here.</p></dd>


<dt id="arg-sds-obs-sds-out-seas">sds_obs, sds_out, seas<a class="anchor" aria-label="anchor" href="#arg-sds-obs-sds-out-seas"></a></dt>
<dd><p>A list the same length as <code>fleets</code> specifying the
standard deviation of the observation error used for the sampling; the
standard deviation of the observation error you would like listed in the
returned output, which might not always equal what was actually used for
sampling; and the seasons you want to sample from. Each list element
should contain a single numeric value or a vector, where vectors need to
match the structure of <code>years</code> for the relevant fleet. If single values
are passed, then, internally, they will be repeated for each year. If you
want to repeat a single value for every year and fleet combination, then
just pass it as a list with one entry, e.g., <code>seas = list(1)</code> will sample
from season one for all fleets and years — this is the default for
season. The default for <code>sds_obs</code> is 0.01 and if <code>sds_out</code> is missing,
then <code>sds_obs</code> will be used for the output as well as the input.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A Stock Synthesis data file list object is returned. The object will be a
modified version of <code>dat_list</code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Limitations to the functionality of this function are as follows:</p><ul><li><p>you can only generate observations from rows of data that are present,
e.g., you cannot make a new observation for a year that is not present in
the passed data file;</p></li>
<li><p>no warning will be given if some of the desired year, seas, fleet
combinations are available but not all, instead just the combinations
that are available will be returned in the data list object; and</p></li>
<li><p>sampling uses a log-normal distribution when the log-normal distribution
is specified in <code>CPUEinfo[["Errtype"]]</code> and a normal distribution for all
other error types, see below for details on the log-normal sampling.</p></li>
</ul><p>Samples are generated using the following equation when the log-normal
distribution is specified:
$$
  B_y*exp(stats::rnorm(1, 0, sds_obs)-sds_obs^2/2)
$$,
where \(B_y\) is the expected biomass in year y and \(sds_obs\) is the
standard deviation of the normally distributed biomass or the standard error
of the \(log_e(B_y)\). For the error term, this is the same
parameterization that is used in Stock Synthesis. More details can be found
in the <a href="https://nmfs-stock-synthesis.github.io/doc/SS330_User_Manual_release.html#indices" class="external-link">section on indices in the Stock Synthesis manual</a>
The second term in the equation adjusts the random samples so their expected
value is \(B_y\), i.e., the log-normal bias correction.</p>
<p>If you only know the coefficient of variation (\(CV\)), then the input
error can be approximated using \(\sqrt{log_e(1+CV^{2})}\). Where,
\(CV\) is assumed to be constant with mean changes in biomass. The
log-normal distribution can be approximated by a proportional distribution
or normal distribution only when the variance is low, i.e., \(CV &lt; 0.50\)
or log standard deviation of 0.22.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other sampling functions:
<code><a href="clean_data.html">clean_data</a>()</code>,
<code><a href="sample_agecomp.html">sample_agecomp</a>()</code>,
<code><a href="sample_calcomp.html">sample_calcomp</a>()</code>,
<code><a href="sample_catch.html">sample_catch</a>()</code>,
<code><a href="sample_discard.html">sample_discard</a>()</code>,
<code><a href="sample_lcomp.html">sample_lcomp</a>()</code>,
<code><a href="sample_mlacomp.html">sample_mlacomp</a>()</code>,
<code><a href="sample_wtatage.html">sample_wtatage</a>()</code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Cole Monnahan, Kotaro Ono</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Add a list from [r4ss::SS_readdat()] to your workspace, this is example</span></span></span>
<span class="r-in"><span><span class="co"># data that is saved in the ss3sim package.</span></span></span>
<span class="r-in"><span><span class="co"># Index data are saved in `dat_list[["CPUE"]]`</span></span></span>
<span class="r-in"><span><span class="va">dat_list</span> <span class="op">&lt;-</span> <span class="fu">r4ss</span><span class="fu">::</span><span class="fu"><a href="https://r4ss.github.io/r4ss/reference/SS_readdat.html" class="external-link">SS_readdat</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"example-om"</span>, package <span class="op">=</span> <span class="st">"ss3sim"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="st">"ss3_expected_values.dat"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Sample from each available year from fleet 2 with an increasing trend in</span></span></span>
<span class="r-in"><span><span class="co"># the observation error, i.e., the most recent year has the highest</span></span></span>
<span class="r-in"><span><span class="co"># likelihood to be the furthest from the input data</span></span></span>
<span class="r-in"><span><span class="va">ex1</span> <span class="op">&lt;-</span> <span class="fu">sample_index</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">dat_list</span>,</span></span>
<span class="r-in"><span>  outfile <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>  fleets <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  seas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">dat_list</span><span class="op">[[</span><span class="st">"CPUE"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">dat_list</span><span class="op">[[</span><span class="st">"CPUE"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>, <span class="st">"index"</span><span class="op">]</span> <span class="op">==</span> <span class="fl">2</span>, <span class="st">"seas"</span><span class="op">]</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  years <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">dat_list</span><span class="op">[[</span><span class="st">"CPUE"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"year"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sds_obs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.001</span>, <span class="fl">0.1</span>, length.out <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">dat_list</span><span class="op">[[</span><span class="st">"CPUE"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"year"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>The `outfile` argument of `sample_index()` is deprecated as of ss3sim 1.20.1.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Please save the returned output using `r4ss::SS_writedat()`</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in standardize_sampling_args(fleets, years, other_input = seas):</span> other_input did not have the correct dimensions.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'ex1' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Sample from less years, note that sampling from more years than what is</span></span></span>
<span class="r-in"><span><span class="co"># present in the data will not work</span></span></span>
<span class="r-in"><span><span class="va">ex2</span> <span class="op">&lt;-</span> <span class="fu">sample_index</span><span class="op">(</span><span class="va">dat_list</span>,</span></span>
<span class="r-in"><span>  outfile <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>  fleets <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  seas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">dat_list</span><span class="op">[[</span><span class="st">"CPUE"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">dat_list</span><span class="op">[[</span><span class="st">"CPUE"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>, <span class="st">"index"</span><span class="op">]</span> <span class="op">==</span> <span class="fl">2</span>, <span class="st">"seas"</span><span class="op">]</span></span></span>
<span class="r-in"><span>  <span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  years <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">dat_list</span><span class="op">[[</span><span class="st">"CPUE"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"year"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sds_obs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">0.001</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># sd in the returned file can be different than what is used to sample, this</span></span></span>
<span class="r-in"><span><span class="co"># is helpful when you want to test what would happen if the estimation method</span></span></span>
<span class="r-in"><span><span class="co"># was improperly specified</span></span></span>
<span class="r-in"><span><span class="va">ex3</span> <span class="op">&lt;-</span> <span class="fu">sample_index</span><span class="op">(</span></span></span>
<span class="r-in"><span>  dat_list <span class="op">=</span> <span class="va">dat_list</span>,</span></span>
<span class="r-in"><span>  fleets <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  seas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">dat_list</span><span class="op">[[</span><span class="st">"CPUE"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">dat_list</span><span class="op">[[</span><span class="st">"CPUE"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>, <span class="st">"index"</span><span class="op">]</span> <span class="op">==</span> <span class="fl">2</span>, <span class="st">"seas"</span><span class="op">]</span></span></span>
<span class="r-in"><span>  <span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  years <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">dat_list</span><span class="op">[[</span><span class="st">"CPUE"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"year"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sds_obs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">0.01</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sds_out <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">0.20</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ex3</span><span class="op">[[</span><span class="st">"CPUE"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"se_log"</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span><span class="co"># Sample from two fleets after adding fake CPUE data for fleet 1</span></span></span>
<span class="r-in"><span><span class="va">dat_list2</span> <span class="op">&lt;-</span> <span class="va">dat_list</span></span></span>
<span class="r-in"><span><span class="va">dat_list2</span><span class="op">[[</span><span class="st">"CPUE"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">dat_list</span><span class="op">[[</span><span class="st">"CPUE"</span><span class="op">]</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  <span class="va">dat_list</span><span class="op">[[</span><span class="st">"CPUE"</span><span class="op">]</span><span class="op">]</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>index <span class="op">=</span> <span class="fl">1</span>, seas <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in rbind(deparse.level, ...):</span> numbers of columns of arguments do not match</span>
<span class="r-in"><span><span class="va">dat_list2</span><span class="op">[[</span><span class="st">"N_cpue"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="va">dat_list2</span><span class="op">[[</span><span class="st">"CPUE"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ex4</span> <span class="op">&lt;-</span> <span class="fu">sample_index</span><span class="op">(</span></span></span>
<span class="r-in"><span>  dat_list <span class="op">=</span> <span class="va">dat_list2</span>,</span></span>
<span class="r-in"><span>  fleets <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span></span>
<span class="r-in"><span>  seas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">7</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="co"># Subset two years from each fleet</span></span></span>
<span class="r-in"><span>  years <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">76</span>, <span class="fl">78</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80</span>, <span class="fl">82</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="co"># Use the same sd values for both fleets</span></span></span>
<span class="r-in"><span>  sds_obs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">0.01</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sds_out <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">0.20</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in sample_index(dat_list = dat_list2, fleets = 1:2, seas = list(1,     7), years = list(c(76, 78), c(80, 82)), sds_obs = list(0.01),     sds_out = list(0.2)):</span> All `fleets` must be found in `dat_list$cpue$index`</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> You tried to sample from fleets 1 and 2.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">✖</span> Fleet 1 is missing.</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Kelli F. Johnson, Sean C. Anderson, Kathryn L. Doering, Cole C. Monnahan, Christine C. Stawitz.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

      </footer></div>






  </body></html>

